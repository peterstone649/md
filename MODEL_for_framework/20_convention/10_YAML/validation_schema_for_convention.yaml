# YAML Schema for Convention Validation
# Schema Version: V1.0.0
# This schema validates framework conventions against the updated template structure

$schema: "http://json-schema.org/draft-07/schema#"
$id: "convention-validation-schema"

title: "Framework Convention Validation Schema"
description: "Validates that conventions follow the standard template structure based on prefix standards convention"

type: object
required:
  - convention_title
  - version
  - status
  - date
  - manifesto_statement
  - rationale
  - core_convention_principles
  - convention_usage_guidelines
  - quality_assurance_standards
  - implementation_guidelines
  - benefits_and_impact
  - scope_and_applicability
  - core_definitions
  - version_requirements
  - rules_and_guidelines
  - naming_conventions
  - status_and_states
  - examples
  - related_conventions_and_documents
  - implementation_notes
  - changelog

properties:

  # ==================== HEADER SECTION ====================
  convention_title:
    type: string
    pattern: "^\\d+\\. .* \\([A-Z_]+\\) \\*\\*\\[PRIO: .*\\]\\*\\*$"
    description: "Convention title must follow format: [NUMBER]. [NAME] ([CONSTANT_REFERENCE]) **[PRIO: [LEVEL]]**"

  version:
    type: string
    pattern: "^V\\d+\\.\\d+\\.\\d+$"
    description: "Version must follow V{major}.{minor}.{patch} format"

  status:
    type: string
    enum:
      - "DRAFT"
      - "OPEN"
      - "IN PROGRESS"
      - "PAUSED"
      - "REVIEW"
      - "DONE"
      - "ARCHIVED"
    description: "Document status must be one of the approved values"

  date:
    type: string
    pattern: "^\\d{4}-\\d{2}-\\d{2}$"
    description: "Date must be in YYYY-MM-DD format"

  manifesto_statement:
    type: string
    minLength: 20
    description: "Manifesto statement explaining convention purpose and benefits"

  rationale:
    type: string
    minLength: 20
    description: "Rationale explaining why this convention exists and what problems it solves"

  # ==================== CORE CONVENTION SECTIONS ====================
  core_convention_principles:
    type: object
    required:
      - standard_convention_format
      - convention_component_definitions
      - convention_rules
    properties:
      standard_convention_format:
        type: string
        description: "Standard format structure for conventions"
      convention_component_definitions:
        type: array
        minItems: 3
        items:
          type: object
          required:
            - component
            - definition
        description: "Component definitions for convention structure"
      convention_rules:
        type: array
        minItems: 3
        items:
          type: string
        description: "Rules that conventions must follow"

  convention_usage_guidelines:
    type: object
    required:
      - convention_application_rules
      - convention_categories
    properties:
      convention_application_rules:
        type: array
        minItems: 3
        items:
          type: string
        description: "Rules for applying conventions"
      convention_categories:
        type: object
        required:
          - core_conventions
          - domain_conventions
          - special_conventions
        description: "Convention categorization system"

  quality_assurance_standards:
    type: object
    required:
      - convention_validation_rules
      - automated_validation
      - maintenance_procedures
    properties:
      convention_validation_rules:
        type: array
        minItems: 3
        items:
          type: string
        description: "Rules for validating conventions"
      automated_validation:
        type: array
        minItems: 3
        items:
          type: string
        description: "Automated validation methods"
      maintenance_procedures:
        type: array
        minItems: 3
        items:
          type: string
        description: "Procedures for maintaining conventions"

  implementation_guidelines:
    type: object
    required:
      - convention_adoption_process
      - tools_and_integration
      - monitoring_and_compliance
    properties:
      convention_adoption_process:
        type: array
        minItems: 3
        items:
          type: string
        description: "Process for adopting conventions"
      tools_and_integration:
        type: array
        minItems: 3
        items:
          type: string
        description: "Tools and integration support"
      monitoring_and_compliance:
        type: array
        minItems: 3
        items:
          type: string
        description: "Monitoring and compliance procedures"

  benefits_and_impact:
    type: object
    required:
      - operational_benefits
      - development_benefits
      - collaboration_benefits
    properties:
      operational_benefits:
        type: array
        minItems: 3
        items:
          type: string
        description: "Operational benefits of conventions"
      development_benefits:
        type: array
        minItems: 3
        items:
          type: string
        description: "Development benefits of conventions"
      collaboration_benefits:
        type: array
        minItems: 3
        items:
          type: string
        description: "Collaboration benefits of conventions"
  
  # ==================== SECTION 1: SCOPE ====================
  scope_and_applicability:
    type: object
    required:
      - when_to_apply
      - target_audience
    properties:
      when_to_apply:
        type: array
        minItems: 1
        items:
          type: string
          minLength: 10
        description: "At least one 'when to apply' criterion is required"
      target_audience:
        type: array
        minItems: 1
        items:
          type: string
          minLength: 5
        description: "At least one target audience is required"
  
  # ==================== SECTION 2: DEFINITIONS ====================
  core_definitions:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - element
        - definition
        - example
      properties:
        element:
          type: string
          minLength: 1
        definition:
          type: string
          minLength: 10
        example:
          type: string
          minLength: 1
    description: "At least one core definition is required"
  
  # ==================== SECTION 3: VERSION ====================
  version_requirements:
    type: object
    required:
      - version_format
      - semantic_versioning
      - version_documentation
    properties:
      version_format:
        type: string
        pattern: "V\\{major\\}\\.\\{minor\\}\\.\\{patch\\}"
        description: "Version format must follow semantic versioning"
      semantic_versioning:
        type: object
        required:
          - MAJOR
          - MINOR
          - PATCH
        properties:
          MAJOR:
            type: string
            description: "MAJOR version definition"
          MINOR:
            type: string
            description: "MINOR version definition"
          PATCH:
            type: string
            description: "PATCH version definition"
      version_documentation:
        type: array
        minItems: 1
        items:
          type: string
        description: "Version documentation requirements"
  
  # ==================== SECTION 4: RULES ====================
  rules_and_guidelines:
    type: object
    required:
      - rule_categories
    properties:
      rule_categories:
        type: array
        minItems: 1
        items:
          type: object
          required:
            - category_name
            - description
          properties:
            category_name:
              type: string
              pattern: "^\\d+\\.\\d+"
            description:
              type: string
              minLength: 20
            requirements:
              type: array
              items:
                type: string
    description: "Rules and guidelines section is required"
  
  # ==================== SECTION 5: NAMING ====================
  naming_conventions:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - pattern
        - meaning
        - example
      properties:
        pattern:
          type: string
          minLength: 1
        meaning:
          type: string
          minLength: 5
        example:
          type: string
          minLength: 1
    description: "At least one naming convention is required"
  
  # ==================== SECTION 6: STATUS ====================
  status_and_states:
    type: array
    minItems: 7
    items:
      type: object
      required:
        - status
        - meaning
        - transition
      properties:
        status:
          type: string
          enum:
            - "DRAFT"
            - "OPEN"
            - "IN PROGRESS"
            - "PAUSED"
            - "REVIEW"
            - "DONE"
            - "ARCHIVED"
        meaning:
          type: string
          minLength: 10
        transition:
          type: string
          pattern: "^.*→.*$"
    description: "All 7 status entries are required"
  
  # ==================== SECTION 7: EXAMPLES ====================
  examples:
    type: object
    required:
      - correct_usage
      - incorrect_usage
      - edge_cases
    properties:
      correct_usage:
        type: string
        minLength: 10
        description: "Example of correct usage"
      incorrect_usage:
        type: string
        minLength: 10
        description: "Example of incorrect usage to avoid"
      edge_cases:
        type: string
        minLength: 10
        description: "Examples of edge cases"
    description: "Examples section with 3 subsections is required"
  
  # ==================== SECTION 8: RELATED CONVENTIONS AND DOCUMENTS ====================
  related_conventions_and_documents:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - reference
        - relationship
      properties:
        reference:
          type: string
          pattern: "(\\[CONV_FOR_.*\\])|(\\.\\./.*)"
        relationship:
          type: string
          minLength: 10
    description: "At least one related convention or document is required"

  # ==================== SECTION 9: IMPLEMENTATION NOTES ====================
  implementation_notes:
    type: object
    required:
      - migration_path
      - tooling_support
      - validation_checklist
    properties:
      migration_path:
        type: string
        minLength: 20
        description: "Migration path instructions"
      tooling_support:
        type: array
        items:
          type: string
        description: "Tooling support options"
      validation_checklist:
        type: array
        items:
          type: string
          pattern: "^\\[ \\] "
        description: "Validation checklist items"
    description: "Implementation notes section is required"
  
  # ==================== SECTION 10: CHANGELOG ====================
  changelog:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - version
        - date
        - changes
      properties:
        version:
          type: string
          pattern: "^V\\d+\\.\\d+\\.\\d+$"
        date:
          type: string
          pattern: "^\\d{4}-\\d{2}-\\d{2}$"
        changes:
          type: string
          minLength: 10
    description: "At least one changelog entry is required"
  
  # ==================== SECTION 11: APPENDICES ====================
  appendices:
    type: object
    properties:
      appendix_a:
        type: string
        description: "Optional Appendix A"
      appendix_b:
        type: string
        description: "Optional Appendix B"
    description: "Appendices section is optional"

# ==================== VALIDATION FUNCTIONS ====================
functions:
  validate_convention:
    description: "Main validation function for conventions"
    inputs: [convention_file_path]
    returns: validation_result
  
  check_header:
    description: "Validates convention header requirements"
    inputs: [header_data]
    returns: header_validation_result
  
  check_sections:
    description: "Validates all required sections exist"
    inputs: [convention_content]
    returns: section_validation_result
  
  check_tables:
    description: "Validates table structures and formats"
    inputs: [markdown_tables]
    returns: table_validation_result
  
  check_links:
    description: "Validates internal and external links"
    inputs: [document_links]
    returns: link_validation_result

# ==================== EXAMPLE USAGE ====================
examples:
  valid_convention: |
    # [CONV_FOR_EXAMPLE]
    
    > **Convention for Example Convention**
    >
    > **Version:** V0.1.0
    > **Status:** DONE
    > **Date:** 2026-01-08
    >
    > **Confidence Score:** 5
    > **Integration Field:** OT
    
    ## Derivation Source
    Based on `<source>`
    
    ## Core Inheritance
    - Inherits from framework
    
    ## Rationale
    This convention establishes...
    
    ## Abstract
    This convention defines...
    
    ## 1. Scope and Applicability
    ...
    
    ## 2. Core Definitions
    | Element | Definition | Example |
    |---------|------------|---------|
    | **term** | Description | `example` |
    
    ## 3. Version Requirements
    See [CONV_FOR_VERSION](./01_convention_for_version.md)
    
    ## 4. Rules and Guidelines
    ### 4.1 Rule Category
    Description...
    
    ## 5. Naming Conventions
    | Pattern | Meaning | Example |
    |---------|---------|---------|
    | **pattern** | Description | `example` |
    
    ## 6. Status and States
    | Status | Meaning | Transition |
    |--------|---------|------------|
    | **DRAFT** | Description | → OPEN |
    
    ## 7. Examples
    ### 7.1 Correct Usage
    ```
    example
    ```
    
    ## 8. Related Conventions
    | Reference | Relationship |
    |-----------|--------------|
    | [CONV_FOR_VERSION] | Related |
    
    ## 9. Implementation
    ### 9.1 Migration Path
    Instructions...
    
    ## 10. Changelog
    | Version | Date | Changes |
    |---------|------|---------|
    | V0.1.0 | 2026-01-08 | Initial |
    
    ## 11. Appendices
    ### Appendix A: Info
    Details...
    
    **End of Convention**

# ==================== CONVENTION FILES BASED ON ====================
# This schema is designed to validate conventions created using the following framework convention files:

convention_files_based_on:
  - file: "01_convention_for_version.md"
    description: "Version numbering and semantic versioning standards"
    path: "../01_convention_for_version.md"

  - file: "02_convention_for_date.md"
    description: "Date formatting and representation standards"
    path: "../02_convention_for_date.md"

  - file: "03_convention_for_writing_style.md"
    description: "Writing style, grammar, and documentation standards"
    path: "../03_convention_for_writing_style.md"

  - file: "10_convention_for_file_naming.md"
    description: "File naming conventions and standards"
    path: "../10_convention_for_file_naming.md"

  - file: "11_convention_for_confidence_scoring.md"
    description: "Confidence scoring methodology and standards"
    path: "../11_convention_for_confidence_scoring.md"

  - file: "12_convention_for_formal_notation.md"
    description: "Formal notation and mathematical representation standards"
    path: "../12_convention_for_formal_notation.md"

  - file: "13_convention_for_framework_integration_field.md"
    description: "Framework integration field definitions and usage"
    path: "../13_convention_for_framework_integration_field.md"

  - file: "14_convention_for_stati.md"
    description: "Status definitions and state management standards"
    path: "../14_convention_for_stati.md"

  - file: "15_convention_for_abbreviations.md"
    description: "Abbreviation standards and definitions"
    path: "../15_convention_for_abbreviations.md"

  - file: "16_convention_for_intellectual_property_rights.md"
    description: "Intellectual property rights and licensing standards"
    path: "../16_convention_for_intellectual_property_rights.md"

  - file: "17_convention_for_prefix_standards.md"
    description: "Prefix standards for categorization and processing"
    path: "../17_convention_for_prefix_standards.md"

# ==================== SCHEMA METADATA ====================
$meta:
  schema_version: "V1.0.0"
  created: "2026-01-09"
  updated: "2026-01-09"
  author: "Framework Team"
  purpose: "Validate convention documents against updated template structure based on prefix standards convention"
  validation_level: "strict"
  template_version: "V1.0.0"
